
<!DOCTYPE html>
<!--[if lt IE 7 ]> <html dir="ltr" lang="en-US" class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html dir="ltr" lang="en-US" class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html dir="ltr" lang="en-US" class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html dir="ltr" lang="en-US" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html dir="ltr" lang="en-US"> <!--<![endif]-->

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<title>lukencode | code first, ask questions later</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" href="http://lukencode.com/wp-content/themes/lukencode/images/favicon.ico">
	<link rel="apple-touch-icon" href="http://lukencode.com/wp-content/themes/lukencode/images/apple-touch-icon.png">
	<link rel="profile" href="http://gmpg.org/xfn/11" />
    <link rel="stylesheet" href="http://lukencode.com/wp-content/themes/lukencode/style.css?1322532725" type="text/css" media="screen, projection" />
	<link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz' rel='stylesheet' type='text/css'>
	<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
	<meta name="google-site-verification" content="e6fQUO7vqSIw6sdQQeiUPs4JPc8VghE_9u72V2NXv4U" /> 	
</head>		
	
<body class="home blog logged-in">
	<div id="headerWrap">
		<header id="branding" role="banner">
			<hgroup>
				<h1 id="site-title">
					<a href="http://lukencode.com/" title="lukencode" rel="home">
					</a>
				</h1>
				<div id="site-description">code first, ask questions later</div>
			</hgroup>
			
		</header>
								
		<div id="secondary" class="widget-area">
			<aside id="text-4" class="widget widget_text" role="complementary"><h4 class="widget-title">Author</h4>			
				<div class="textwidget">
					<div class="me">
						<img class="grav" src='http://en.gravatar.com/userimage/7397984/5de7392594b98c6b510f0691ca5e0638.jpeg' />
						<div>
							<strong>Luke Lowrey</strong>
						</div>
						<p>I drink beer and build web and mobile apps (in that order).</p>

						<ul>
							<li> <a href='/about'>About</a> </li>
							<li> <a href='/contact'>Contact</a> </li>
						</ul>
					</div>
				</div>
			</aside>
			<aside id="categories-3" class="widget widget_categories" role="complementary">
				<h4 class="widget-title">Blog</h4>		
				<ul>
					<li class="cat-item cat-item-3"><a href="http://lukencode.com/category/code/" title="View all posts filed under Code">Code</a></li>
					<li class="cat-item cat-item-5"><a href="http://lukencode.com/category/database/" title="View all posts filed under Database">Database</a></li>
					<li class="cat-item cat-item-6"><a href="http://lukencode.com/category/mobile/" title="View all posts filed under Mobile">Mobile</a></li>
					<li class="cat-item cat-item-4"><a href="http://lukencode.com/category/web/" title="View all posts filed under Web">Web</a></li>
					<li class="cat-item cat-item-24"><a href="http://lukencode.com/category/web-services-2/" title="View all posts filed under Web Services">Web Services</a></li>
				</ul>
			</aside>
			<aside id="text-5" class="widget widget_text" role="complementary">			
				<div class="textwidget">
					<a href="http://twitter.com/lukencode" class="twitter-follow-button" data-button="grey" data-text-color="#FFFFFF" data-link-color="#00AEFF">Follow @lukencode</a>
					<div style='padding:10px 2px;'>
						<a href='/feed'>
							<img src='http://lukencode.com/wp-content/uploads/2011/04/feed-icon.png' />
							Subscribe
						</a>
					</div>
					<a title="Luke Lowrey is on Google+" rel="author" href="https://plus.google.com/107927764078971426449?rel=author" alt="Google+" title="Google+">Google+</a>
				</div>
			</aside>		
		</div>			
	</div>
				
	<div id="primary">
		<div id="content">
			<ul class="posts">
    
		<li>
			<div class="idea">
				
					<h2><a class="postlink" href="">this is a post</a></h2>
					<div class="postdate">
						<ul>
						
						</ul>
					</div>
					<p>NetBash (drop in command line for asp.net web applications) was first released late last year with little to no response from the community. No big deal – I built it to scratch my own itch so it was at least going to be useful to me. Then, like clockwork I go on holidays for a week and a bit and it is featured on <a href="http://asp.net" target="_blank">Asp.net</a> and tweeted by close to 100 people. I have used the past few days to catch up with the bugs people have found (thanks heaps to those who forked and fixed bugs themselves) and get a new release out on <a href="http://nuget.org/packages/NetBash" target="_blank">NuGet</a>.</p> <h3>Bug Fixes</h3> <p><p> <ul> <li>NetBash is now compatible with older versions of JQuery (1.5 at least). This was causing some issues with people using a fresh file –&gt; new project mvc app to test it out.  <li>Console now auto scrolls to bottom when opened.  <li>Now more compatible with older versions of IE.</li></ul> <h3 style="padding-top: 20px">Formatting Extensions</h3> <p>A couple of classes have been included in the NetBash.Formatting namespace to help make the output of your commands a bit prettier. The most useful is the <strong>TableExtensions</strong> class contributed by <a href="https://twitter.com/#!/d1k_is" target="_blank">Damian Karzon</a>. This class includes a couple of extension methods on IEnumerable&lt;T&gt; that take a list of objects and using reflection output them into a nice consoley table. Here is an example:</p><pre class="brush: csharp;">public string Process(string[] args)
{
    var tempData = new List&lt;GridData&gt;
    {
        new GridData
        {
            RowId = 1,
            SomeName = &quot;NUMBER1&quot;,
            Longtext = &quot;12345678901234567890&quot;,
            SomeDate = DateTime.Today
        },
        new GridData
        {
            RowId = 2,
            SomeName = &quot;sup bro&quot;,
            Longtext = &quot;I AM THE GREATEST&quot;,
            SomeDate = DateTime.Now.AddDays(21)
        },
        new GridData
        {
            RowId = 5,
            SomeName = &quot;GridCommand&quot;,
            Longtext = &quot;longish&quot;,
            SomeDate = DateTime.Now.AddDays(-3)
        }
    };</p>
<pre><code>return tempData.ToConsoleTable();
</code></pre>

<p>}</pre></p>
<p>Output:</p>
<p><a href="http://lukencode.com/wp-content/uploads/2012/01/gridyo.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="gridyo" border="0" alt="gridyo" src="http://lukencode.com/wp-content/uploads/2012/01/gridyo_thumb.png" width="624" height="115"></a></p>
<p>Pretty neat I think. It works with most things I’ve thrown at it including anonymous classes but not dynamic.</p>
<p>The other class is called <strong>SparkExtensions</strong>. This class is a C# port of this <a href="https://github.com/holman/spark" target="_blank">cool little shell script</a>. The Spark() methods are extension methods on various IEnumerable collections (int, decimal, string, etc) they take the list and turn it into a cool little spark line graph similar to this: ▁▂▃▅▂▇. Here is a basic example:</p><pre class="brush: csharp;">public string Process(string[] args)
{
    var list = new List&lt;int&gt;() { 5, 7, 3, 8, 9, 2, 12, 7, 6 };

    return list.Spark();
}</pre>
<p>Hopefully these additions make building commands a little more painless. If you are using NetBash or better still have built some open source commands I'd love to hear from you. NetBash source can be found on <a href="https://github.com/lukencode/NetBash" target="_blank">Github</a> and downloaded using <a href="http://nuget.org/packages/NetBash" target="_blank">NuGet</a>.</p>
					
					<a href="#disqus_thread">Comments</a>
				
			</div>
		</li>
    
		<li>
			<div class="idea">
				
					<h2><a class="postlink" href="">this is a post</a></h2>
					<div class="postdate">
						<ul>
						
						</ul>
					</div>
					<p>One thing that always annoys me when working on a web app is having to write those inevitable pages full of admin functions some of which are just a single button. When hacking up one such page I had a thought - a plug in library providing a command line for your web app might save me a lot of time. <a href="https://github.com/lukencode/NetBash" target="_blank">NetBash</a> is what I came up with.</p> <p><a href="http://lukencode.com/wp-content/uploads/2011/12/netbash.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="netbash" border="0" alt="netbash" src="http://lukencode.com/wp-content/uploads/2011/12/netbash_thumb.png" width="1028" height="561"></a></p> <p>As you can see from the screenshot NetBash is basically a miniature command line complete with that sweet lime green on black theme that lives in your web app. It can be expanded, minimised and hidden with keyboard shortcuts (<a href="https://github.com/madrobby/keymaster" target="_blank">keymaster</a> ftw) and remembers recent command history using localStorage. NetBash works in a similar way to the <a href="http://code.google.com/p/mvc-mini-profiler/" target="_blank">MVC Mini Profiler</a> meaning that it can be installed with minimal effort on your part (just a NuGet package) and follows you around your site. This is the setup:</p><pre class="brush: csharp;">protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);

    NetBash.Init();

    //this is optional, allows you to decide who sees netbash
    NetBash.Settings.Authorize = (request) =&gt;
        {
            return request.IsLocal;
        };
}
</pre>
<p>The call to Init inserts a couple of routes for the handler, css and js files. You also need to somewhere in your _Layout.cshtml / MasterPage add the RenderIncludes function to write the css and script tags to the page.</p><pre class="brush: csharp;">NetBash.RenderIncludes()</pre>
<p>The way it works is by searching your application using reflection for classes implementing IWebCommand with a WebCommand attribute. The WebCommand attribute defines a name for the command which is used to invoke it as well as a description displayed on help. The IWebCommand interface has a method called Process which passes in a string array of arguments in the same manor that a .NET console application’s main method would. When a command is entered on the front end an ajax request is made to the NetBash handler. The handler grabs the first word of the request text and matches it to a WebCommand with the same name then invokes Process and returns the result. Here is a very simple example command that returns the length of the arguments passed in:</p><pre class="brush: csharp;">[WebCommand("length", "Returns number of characters in given arguments")]
public class LengthCommand : IWebCommand
{
    public bool ReturnHtml
    {
        get { return false; }
    }

    public string Process(string[] args)
    {
        return string.Join(" ", args).Length.ToString();
    }
}</pre>
<p>Hopefully defining commands this way makes it both dead easy to implement while allowing flexibility to do something more complex (perhaps parsing the arguments with <a href="http://www.ndesk.org/Options" target="_blank">nDesk.Options</a>).</p>
<p>It is pretty early days for the code so I probably wouldn’t recommend using it in a production situation at the moment. NetBash is available as a <a href="http://nuget.org/packages/NetBash" target="_blank">NuGet package</a> and the source on GitHub at <a href="https://github.com/lukencode/NetBash" target="_blank">lukencode/netbash</a>. I’d love to hear people opinions on the api (nothing is set in stone) as well as the UI which could use some work. I have some ideas for some useful commands (some mad stats with a .net version of <a href="https://github.com/holman/spark" target="_blank">spark</a>) also <a href="http://benjii.me/" target="_blank">Ben Cull</a> promises me he will write an asp.net membership command pack.</p>
					
					<a href="#disqus_thread">Comments</a>
				
			</div>
		</li>
    
		<li>
			<div class="idea">
				
					<h2><a class="postlink" href="">this is a post</a></h2>
					<div class="postdate">
						<ul>
						
						</ul>
					</div>
					<p>When creating the amazing, incredible and life changing app for managing money you borrow and lend <a href="http://www.windowsphone.com/en-US/apps/7745a9a4-6926-4767-9e61-837fdd1faba5" target="_blank">Metrowe</a> I was pretty annoyed to discover that in the Mango SDK there are choosers for selecting emails: <em>EmailAddressChooserTask</em><strong> </strong>and phone numbers: <em>PhoneNumberChooserTask </em>but not just plain selecting a contact. The problem with the other choosers is the email address will exclude contacts without an email and similarly the phone number chooser and phone numbers. After much complaining decided to develop my own contact chooser (quite closely based off <a href="http://blog.naviso.fr/wordpress/?p=851" target="_blank">this french one</a>) matching the OS version as closely as possible. This is what it ended up looking like:</p> <p><a href="http://lukencode.com/wp-content/uploads/2011/12/contact-chooser.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="contact-chooser" border="0" alt="contact-chooser" src="http://lukencode.com/wp-content/uploads/2011/12/contact-chooser_thumb.png" width="333" height="553"></a></p> <p>Seamless huh? I’ve managed to get the calling code for this down to something nice a simple which pretty much matches the built in choosers:</p><pre class="brush: csharp;">private void button1_Click(object sender, RoutedEventArgs e)
{
    var contactChooser = new ContactChooserTask();
    contactChooser.OnSelected += new EventHandler&lt;ContactChooserEventArgs&gt;(contactChooser_OnSelected);
    contactChooser.Show();
}

void contactChooser_OnSelected(object sender, ContactChooserEventArgs e)
{
    MessageBox.Show(e.Contact.DisplayName);
}
</pre>
<p>Under the covers it is a bit of a different story. The display relies on the <a href="http://silverlight.codeplex.com/" target="_blank">Silverlight Toolkit’s</a> LongListSelector (which is awesome) and uses code pretty similar to that described by my good friend Benjii in his post: <a href="http://benjii.me/2011/10/how-to-use-the-long-list-selector-for-windows-phone-mango/" target="_blank">How to Use the Long List Selector for Windows Phone Mango</a>. The code to encapsulate the page is kind of a mish mash of code adapted(/stolen) from the source of the <a href="http://coding4fun.codeplex.com/" target="_blank">Coding4Fun</a> toolkit (also awesome). That said it seems to work well in my app and in my very limited testing.</p>
<p>The code for the library lives on github at <a href="https://github.com/lukencode/ContactChooser" target="_blank"><strong>lukencode/ContactChooser</strong></a> and is free and open source fork it, try it out, tell me how I suck then submit a pull request fixing the aforementioned suck! A couple of things that would be cool to see added would be some nice transition animations in and out and some more control over how the chooser looks.</p>
					
					<a href="#disqus_thread">Comments</a>
				
			</div>
		</li>
    
		<li>
			<div class="idea">
				
					<h2><a class="postlink" href="">this is a post</a></h2>
					<div class="postdate">
						<ul>
						
						</ul>
					</div>
					<p><a href="http://numbertap.com/" target="_blank">Numbertap</a> is a Windows Phone game built by me and a few mates (<a href="http://twitter.com/benjii22" target="_blank">@benjii22</a>, <a href="http://twitter.com/d1k_is" target="_blank">@d1k_is</a> and <a href="http://twitter.com/fishkopter" target="_blank">@fishkopter</a>). It is alive and well in the marketplace right now in the games section. When people ask this is what we tell people Numbertap is:</p>
<blockquote>
<em>"NumberTap pits you and your mad math skills against the rest of the world in a fast paced number tapping math frenzy!"</em>
</blockquote>
<p>What that actually means is Numbertap is a maths based game where you answer maths questions online organised into 2 minute rounds. At any one time everyone playing the game is playing the same round, at the end scores are tallied and you are placed in your rightful place as king of the maths world on the online leader board. Its kinda like times tables meets guitar hero scoring meets global leader boards. Here is a shot of the game in action:</p>
<p><a href="http://lukencode.com/wp-content/uploads/2011/09/GameScreen.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; margin-right: auto; padding-top: 0px; border-width: 0px;" title="GameScreen" src="http://lukencode.com/wp-content/uploads/2011/09/GameScreen_thumb.png" alt="GameScreen" width="204" height="337" border="0" /></a></p>
<p>This post is a collection of the libraries and techniques we found useful in both the windows phone app and the asp.net mvc server side.</p>
<h2>The App</h2>
<p>Like all good Windows Phone apps we focused on a few key ideas – simply and beautiful design, fluid movement and animation and speedy performance. Listed in no particular order is the technology we used to (hopefully) achieve this.</p>
<p><strong>Silverlight over XNA for a game?!
</strong>If I were to guess I would say the vast majority of windows phone games are XNA based (and with good reason!) but we had a couple of reasons to roll with Silverlight:</p>
<ol>
	<li>We know Silverlight. This one is the most obvious 3/4 developers had built reasonably successful apps using Silverlight while 0/4 of us had built anything at all in XNA.</li>
	<li>We wanted a kick ass metro design. Building apps with expression blend in Silverlight almost feels like cheating in terms of design. All the styles, colours, buttons and fonts are right there ready to go all the [crap at design] developer has to do is follow <a href="http://www.jeff.wilcox.name/2011/03/metro-design-guide-v1/" target="_blank">Jeff Wilcox’s excellent metro design guide</a>to metro UI heaven (just don't let Jeff catch you missing a 12px margin). Since the gameplay we had in mind was pretty simple and Silverlight animations are actually pretty powerful we didn’t give up too much on the XNA front.</li>
	<li>There is no 3.</li>
</ol>
<p><strong>Awesome Open Source Control Libraries</strong>
This is one are where windows phone is really starting to shine, nearly any control you would want UI wise that isn’t in the base SDK exists in a well documented and supported open source library. The two we like best are the official <a href="http://silverlight.codeplex.com/" target="_blank">Silverlight Toolkit</a> and the <a href="http://coding4fun.codeplex.com/" target="_blank">Coding4Fun Toolkit</a> both are available on NuGet.</p>
<p>Silverlight toolkit is more or less a must have in every windows phone app. The most useful thing it brings to the table is really nice and super simple to implement page transitions. Here is an example of some XAML form the Numbertap about page to do turnstile transitions in and out:</p>
<pre class="brush: xml;">
<toolkit:transitionservice.navigationintransition>
    <toolkit:navigationintransition>
        <toolkit:navigationintransition.backward>
            <toolkit:turnstiletransition mode="BackwardIn" />
        </toolkit:navigationintransition.backward>
        <toolkit:navigationintransition.forward>
            <toolkit:turnstiletransition mode="ForwardIn" />
        </toolkit:navigationintransition.forward>
    </toolkit:navigationintransition>
</toolkit:transitionservice.navigationintransition>
<toolkit:transitionservice.navigationouttransition>
    <toolkit:navigationouttransition>
        <toolkit:navigationouttransition.backward>
            <toolkit:turnstiletransition mode="BackwardOut" />
        </toolkit:navigationouttransition.backward>
        <toolkit:navigationouttransition.forward>
            <toolkit:turnstiletransition mode="ForwardOut" />
        </toolkit:navigationouttransition.forward>
    </toolkit:navigationouttransition>
</toolkit:transitionservice.navigationouttransition>
</pre>
<p>The other Silverlight Toolkit feature I really like is the tilt effect, it really helps bring an application to life when elements react to touch. You can automatically add a “tilt” to all eligible controls (buttons, list items, etc) on a page by just adding this to your PhoneApplicationPage xaml.</p>
<pre class="brush: xml;">toolkit:TiltEffect.IsTiltEnabled="True"</pre>
<p>Coding4Fun is the other toolkit we make heavy use of. It has a couple of good controls but the ones we really like are the prompts. The input prompt was clean way to prompt players on registration, as with all the Coding4Fun prompts the code is really simple.</p>
<pre class="brush: csharp;">var msg = new InputPrompt();
msg.Title = "Create Player";
msg.Message = "Please enter a player name";

msg.Show();</pre>
<p>That code (plus a tiny bit extra to add the buttons) gives this result:</p>
<p><a href="http://lukencode.com/wp-content/uploads/2011/09/input-prompt.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; margin-right: auto; padding-top: 0px; border-width: 0px;" title="input-prompt" src="http://lukencode.com/wp-content/uploads/2011/09/input-prompt_thumb.png" alt="input-prompt" width="206" height="340" border="0" /></a></p>
<p>These are other prompts we use are the regular message prompt and the toast prompt (that one looks awesome, slides in and out). They use really similar and really simple code to display so I won’t show it again (but if you want to see let me know).</p>
<div style="margin: 20px auto; width: 600px;"><a href="http://lukencode.com/wp-content/uploads/2011/09/message-box-resize.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="message-box-resize" src="http://lukencode.com/wp-content/uploads/2011/09/message-box-resize_thumb.png" alt="message-box-resize" width="244" height="129" border="0" /></a><a href="http://lukencode.com/wp-content/uploads/2011/09/toast-resize.png"><img style="background-image: none; margin: 0px 0px 0px 20px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="toast-resize" src="http://lukencode.com/wp-content/uploads/2011/09/toast-resize_thumb.png" alt="toast-resize" width="244" height="52" border="0" /></a></div>
<p><strong>Web Services with RestSharp</strong>
I've already posted about how much I love <a href="http://restsharp.org/" target="_blank">RestSharp</a> for <a href="http://lukencode.com/2010/08/04/rest-web-services-in-windows-phone-7/" target="_blank">communicating with web services in windows phone apps</a> but screw it I will say it again: USE RESTSHARP its fast, simple and reliable.</p>
<p><strong>Prompt Users to Review with AppEvents
</strong>With mobile apps getting a good review is pretty much gold. As a user I am very unlikely to try any app with a sub 3/5 star rating. We wanted to give Numbertap the best chance we could at a decent rating by asking users (nicely) to rate the app. We didn’t just want to annoy any user either, we wanted to hit them up when we KNOW they are enjoying the game and they are at a point where they can jump out and give us a good score.</p>
<p>To achieved this lofty goal we used a little library @d1k_is open sourced – <a href="https://github.com/dkarzon/AppEvents" target="_blank">AppEvents</a>. The syntax is a little funky so you should probably check out <a href="http://dkdevelopment.net/2011/04/29/appevents-do-stuff-when-things-happen-wp7/" target="_blank">dk’s blog post</a> for a full intro but essentially what we are doing here is running the method AskToRate() when the “games-played” event has been fired 5 or more times and the “rated” event has not occurred.</p>
<pre class="brush: csharp;">//in app.xaml.cs set up the rule
AppEventsClient.New(Rule.When("rate-app",
                el =&gt; el.Any(e =&gt; e.Name == "games-played" &amp;&amp; e.Occurrrences.Count &gt;= 5) &amp;&amp; !el.Any(e =&gt; e.Name == "rated"))
                .Do(r =&gt; DispatcherHelper.SafeDispatch(() =&gt; AskToRate()))
            );

//when a game has played fire the event
AppEventsClient.Current.Fire("games-played");</pre>
<p>This little piece of code has helped us gain 170+ reviews with an average of about 4.5 / 5 so far (hopefully having a cool game helped).</p>
<p><strong>The Icon</strong>
When you live in an app store (sorry marketplace… don’t sue me) you basically have two ways to attract any customers that may be passing by. One is to have a good review and the other is a slick icon. Given that no one ever has or (or ever will) describe my artistic skills as “slick” we jumped on the crowd sourcing bandwagon and cruised over to <a href="http://99designs.com/" target="_blank">99designs</a> to get ourselves an icon on the cheap ($140ish). We think it turned out pretty good:</p>
<img style="display: block; float: none; margin-left: auto; margin-right: auto;" src="http://catalog.zune.net/v3.2/en-AU/apps/4594645f-fd41-48bd-b12e-b6b1f9fcea40/primaryImage?width=95&amp;height=95&amp;resize=true" alt="" />
<h2>The Server</h2>
<p>Like the App we wanted the server side of Numbertap to be fast and simple, this is what we used.</p>
<p><strong>The Framework</strong>
We know ASP.NET MVC so just like the Silverlight decision we rolled with what we knew. Turns out combining RestSharp, mvc and a shared class library for the API models makes REST based API’s really easy. Because both our app and server shares a class library for RestSharp models it means that we can easily update our web service responses and have that data available in the app. We return json over xml because json rules – this is how you do it from an MVC controller, this action returns some info on player rank and the current number of players in game:</p>
<pre class="brush: csharp;">[HttpPost]
public ActionResult GameStats(LoginRequest loginRequest)
{
    var player = DB.Queries.Player.GetPlayer(loginRequest.ID, loginRequest.PlatformID, loginRequest.GameID, null);

    var response = new GameStatsResponse();

    response.PlayerStats = DB.Queries.Player.GetPlayerStats(loginRequest.GameID, player.PlayerID);
    response.PlayerStats.PlayerRank = DB.Queries.Player.WeeklyRank(player.PlayerID, loginRequest.GameID);

    return Json(response, JsonRequestBehavior.AllowGet);
}</pre>
<p><strong>The Platform
</strong>Being a multiplayer game Numbertap needed a server side component and where better to look for a server than the cloud? I bet you are thinking I’m going to talk about how awesome azure is right? WRONG! Bottom line is I looked at azure and I looked at the azure pricing table and quickly shut my browser and unplugged my computer before my head exploded. Azure is too hard for a simple developer like me, we wanted easy cloud and found it with <a href="https://appharbor.com/" target="_blank">App Harbour</a>. App Harbour in their own words is “Azure done right”. Deployment is super simple – pushing to a git repo will build your project, run your tests and deploy. We went with the $10 a month shared Sql Server DB and have the option to add instances to scale at any time BALLIN’.</p>
<p>Hopefully from this rambling post you can pick up a tip or two you can use in your own app. If anyone (ha! like anyone reads my blog) would like some more information on something I have posted here hit my up in the comments and I might do a blog post on it or maybe just send you some code.</p>

					
					<a href="#disqus_thread">Comments</a>
				
			</div>
		</li>
    
		<li>
			<div class="idea">
				
					<h2><a class="postlink" href="">this is a post</a></h2>
					<div class="postdate">
						<ul>
						
						</ul>
					</div>
					<p>I have been talking up some substantial updates to the live tiles used in my Windows Phone Google Analytics app <a href="http://social.zune.net/redirect?type=phoneApp&amp;id=11416a38-28f6-df11-9264-00237de2db9e" target="_blank">Phonealytics</a> for some time now. Over the weekend I finally got round to getting started implementing them. The result is a button you can press on your site’s profile page (the first page you get to when you press a site) to pin a live tile of that site to your home screen. </p>  <p><a href="http://lukencode.com/wp-content/uploads/2011/07/fullview1.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 10px 20px 10px 30px; padding-left: 0px; padding-right: 0px; display: inline; float: left; border-top: 0px; border-right: 0px; padding-top: 0px" title="fullview" border="0" alt="fullview" align="left" src="http://lukencode.com/wp-content/uploads/2011/07/fullview_thumb1.png" width="250" height="455" /></a><a href="http://lukencode.com/wp-content/uploads/2011/07/joined.png"><img style="margin: 20px 0px 10px; display: inline; float: left" title="Phonealytics Live Tiles" alt="Phonealytics Live Tiles" align="left" src="http://lukencode.com/wp-content/uploads/2011/07/joined_thumb.png" width="583" height="199" /></a></p>  <p style="clear: both">You can pin as many tiles as you like (although I think the background process might struggle with 5+) with the tiles taking the settings for date range (day, week, month, year) of Phonealytics when pinned. The tiles themselves show a bit more data than the current ones with the front of the tile showing visits and % change, the tile will occasionally flip to reveal the bounce rate and time on site. Pressing a tile from the home screen will take you directly the the details of that site in Phonealytics.</p>  <p><a href="http://lukencode.com/wp-content/uploads/2011/07/new_profile.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="Pin Tile" border="0" alt="Pin Tile" src="http://lukencode.com/wp-content/uploads/2011/07/new_profile_thumb.png" width="254" height="421" /></a></p>  <p>These new live tiles are updated entirely from your phone so should be <strong>much</strong> more reliable than the current tile. The update will be submitted as soon as Microsoft allows mango app updates and hopefully should be ready to go as your phone is updated to mango. The new tiles will definitely be available on the paid version of Phonealytics and possibly will come to the free version eventually now that I don’t need to run a server for them. I am planning on making them a bit more interesting visually to stand out a tad from the sea of [“PhoneAccent”] on everybody’s home screen, any suggestions for the look of the tiles (or anything else) would be awesome.</p>  <p>For those of you who haven’t got the app you can pick it up from the <a href="http://social.zune.net/redirect?type=phoneApp&amp;id=11416a38-28f6-df11-9264-00237de2db9e" target="_blank">zune marketplace</a> or grab the <a href="http://windowsphone.com/s?appid=21baf298-210a-4fe1-9a89-6314ae62151f" target="_blank">free version</a>.</p>
					
					<a href="#disqus_thread">Comments</a>
				
			</div>
		</li>
    
</ul>
<h3>OLDER</h3>
<ul class="postArchive">

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

	<li>
		<span class="olderpostdate">  </span> <a class="postlink" href="">this is a post</a>
	</li>

</ul>
<p><script type="text/javascript">
//&lt;![CDATA[
(function() {
    var links = document.getElementsByTagName('a');
    var query = '?';
    for(var i = 0; i &lt; links.length; i++) {
    if(links[i].href.indexOf('#disqus_thread') &gt;= 0) {
        query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&amp;';
    }
    }
    document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/DISQUS_NAME/get_num_replies.js' + query + '">&lt;/' + 'script&gt;');
})();
//]]&gt;
</script></p>

		</div>				

		<footer id="colophon" role="contentinfo">
				<div id="site-generator">
					<small>&copy Copyright 2012 lukencode <a href="http://wordpress.org/" title="A Semantic Personal Publishing Platform" rel="generator">Proudly powered by WordPress.</a></small>
				</div>
		</footer>
	</div>

	<!-- Grab Google CDN's jQuery. Fall back to local if necessary -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
	<script>!window.jQuery && document.write(unescape('%3Cscript src="http://lukencode.com/wp-content/themes/lukencode/js/jquery-1.4.4.min.js"%3E%3C/script%3E'))</script>

</body>
</html>

